# 更新日志

本文档记录了登攀引擎项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 新增
- 🎯 **核心AI服务架构**
  - 多LLM提供商支持（OpenAI、Qwen、Kimi、DeepSeek）
  - 统一AI服务接口和智能模型选择
  - 异步调用支持和故障转移机制
  - AI服务健康检查和监控

- 🔧 **MCP协议完整实现**
  - 5个核心AI工具：代码分析、学习任务生成、技能评估、编程洞察、改进建议
  - 5种资源类型：用户档案、技能评估、编程会话、学习任务、技术债务
  - 会话管理和状态追踪
  - 工具和资源的标准化接口

- 📊 **完整数据模型设计**
  - 用户管理：用户档案、技能追踪、学习偏好
  - 编程会话：详细的编程活动记录和统计
  - 代码记录：代码变更、质量分析、AI评估
  - 技能评估：多维度技能评估和进度追踪
  - 学习任务：个性化学习内容和任务管理

- 🗄️ **数据库架构重构**
  - 新增4个核心数据库模块：会话管理、学习进度管理、学习内容管理、技术栈配置
  - 8个新数据模型：MCPSession、MCPCodeSnippet、TechStackAsset、TechStackDebt、LearningProgressSummary、LearningArticle、LearningQuestion、QuestionAttempt
  - 技术栈标准化管理：TechStackCategory、TechStackStandard、TechStackMapping
  - 完整的关系映射和数据完整性约束
  - 支持JSON字段存储复杂数据结构

- 🔧 **MCP工具增强**
  - Climber-Recorder工具扩展：支持20个输入参数
  - 数据库持久化：自动保存技术栈记录到MCPSession
  - 智能数据处理：复杂度评分计算、技术栈合并去重
  - 代码片段管理：支持保存和管理相关代码片段
  - 实时数据库同步：每次MCP调用都会实时更新数据库

- 🚀 **智能代码分析功能**
  - 技术债务自动识别和评估
  - 代码质量多维度分析（复杂度、可维护性、可读性）
  - 性能问题检测和优化建议
  - 个性化代码改进建议生成

- 🎓 **个性化学习系统**
  - 基于技能水平的学习任务生成
  - 智能学习路径规划
  - 学习进度追踪和效果评估
  - 适应性难度调整
  - 技术栈资产与负债管理
  - AI生成的学习文章和题目

- 🔗 **完整API接口**
  - RESTful API设计
  - MCP协议端点实现
  - 异步处理和错误处理
  - OpenAPI文档自动生成
  - 新增Pydantic schemas支持所有数据模型

- 🧪 **全面测试覆盖**
  - 本地功能测试（数据库、MCP服务）
  - AI集成测试（多LLM提供商）
  - 端到端集成测试
  - 真实LLM调用测试
  - 数据库验证测试：自动验证数据保存完整性

- 📱 **前端基础架构**
  - React + TypeScript + Vite项目搭建
  - Tailwind CSS样式系统
  - 基础组件和页面结构
  - 开发环境配置

### 变更
- 🔄 重构AI模型集成架构，支持多提供商
- 📝 更新数据库模型，增强用户技能追踪
- ⚡ 优化异步处理性能
- 🛠️ 改进错误处理和日志记录
- 🗄️ 完全重构数据库架构，实现4个新的数据库系统
- 🔧 大幅扩展MCP工具功能，支持更丰富的数据记录
- 📊 升级测试框架，集成数据库验证功能

### 修复
- 🐛 修复MCP服务中的字段映射问题
- 🔧 解决配置文件解析错误
- 📊 修复用户档案资源读取问题
- 🌐 解决API接口的异步调用问题
- 🗄️ 修复SQLAlchemy模型中的metadata字段名冲突
- 🔗 解决数据库外键关系定义问题
- 📝 修复Pydantic schemas的数据验证问题

### 移除
- 🗑️ 移除过时的Anthropic集成代码
- 🧹 清理未使用的依赖项

## [0.2.0] - 2025-09-13

### 新增
- 🗄️ **数据库架构重大重构**
  - 实现4个核心数据库模块：会话管理、学习进度管理、学习内容管理、技术栈配置
  - 新增8个数据模型，支持完整的学习和开发过程记录
  - 技术栈标准化管理系统，支持智能映射和分类
  - 完整的关系映射和数据完整性约束

- 🔧 **MCP工具功能大幅增强**
  - Climber-Recorder工具扩展至20个输入参数
  - 实现数据库持久化，自动保存所有技术栈记录
  - 智能数据处理：复杂度评分、技术栈合并、代码片段管理
  - 实时数据库同步，确保数据一致性

- 🧪 **测试框架升级**
  - 集成数据库验证功能，自动验证数据保存完整性
  - 端到端测试覆盖MCP调用到数据库保存的完整流程
  - DeepSeek LLM集成测试，验证AI分析功能

- 📊 **Pydantic Schemas完整实现**
  - 为所有新数据模型创建对应的API schemas
  - 支持Create、Update、Response等多种操作模式
  - 数据验证、过滤、分页等功能完整实现

### 变更
- 🗄️ 完全重构数据库架构，从6个表扩展到15个表
- 🔧 MCP工具参数从5个扩展到20个，支持更丰富的数据记录
- 📝 更新所有相关文档和测试用例

### 修复
- 🗄️ 修复SQLAlchemy模型中的metadata字段名冲突问题
- 🔗 解决数据库外键关系定义和导入问题
- 📝 修复数据库初始化脚本的示例数据创建
- 🧪 解决测试过程中的数据验证和显示问题

### 技术栈更新
- **数据库**: 新增11个数据模型，支持复杂的学习和开发数据管理
- **API**: 完整的Pydantic schemas支持，标准化数据接口
- **测试**: 集成数据库验证，确保端到端功能正确性

## [0.1.0] - 2025-09-13

### 新增
- 🎉 登攀引擎项目正式启动
- 🤖 Agent 管理系统
  - 创建、编辑、删除 Agent
  - 支持多种 Agent 类型
  - Agent 配置管理
- 💬 对话系统
  - 多轮对话支持
  - 上下文管理
  - 消息历史记录
- 🛠️ 工具集成
  - 内置工具库
  - 自定义工具支持
  - 工具执行引擎
- 📚 知识库管理
  - 知识库创建和管理
  - 知识条目存储
  - 智能搜索功能
- 🔌 MCP 协议
  - Model Context Protocol 支持
  - 工具和资源管理
  - 客户端连接管理
- 🎨 用户界面
  - 现代化 React 界面
  - 响应式设计
  - Tailwind CSS 样式
- 🚀 性能优化
  - 异步处理
  - 数据库优化
  - 缓存机制
- 📊 监控和日志
  - 结构化日志
  - 健康检查
  - 性能监控
- 🔒 安全特性
  - API 密钥管理
  - 请求验证
  - CORS 配置
- 🐳 容器化部署
  - Docker 支持
  - Docker Compose 配置
  - 生产环境部署
- 📖 文档和测试
  - 完整的 API 文档
  - 单元测试
  - 集成测试
  - 开发指南

### 技术栈
- **前端**: React 18, TypeScript, Vite, Tailwind CSS, Zustand
- **后端**: FastAPI, SQLAlchemy, SQLite, Python 3.9+
- **AI 集成**: OpenAI API, Anthropic API
- **工具**: uv, ESLint, Prettier, pytest, Black, isort
- **部署**: Docker, Docker Compose, Nginx

---

## 版本说明

### 版本格式
- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型
- **新增**: 新功能
- **变更**: 对现有功能的变更
- **弃用**: 即将移除的功能
- **移除**: 已移除的功能
- **修复**: 问题修复
- **安全**: 安全相关的修复